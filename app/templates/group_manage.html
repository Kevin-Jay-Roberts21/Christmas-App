{% extends "base.html" %}
{% block content %}
<h2>Manage "{{ group.name }}"</h2>

<h3>Approved members</h3>
<ul>
  {% for mem, u, gl in approved %}
    <li>
      {{ u.username }} {% if u.id == group.leader_id %}(leader){% endif %}
      {% if gl %}— list "<strong>{{ gl.name }}</strong>"{% endif %}
    </li>
  {% else %}
    <li><em>No approved members yet.</em></li>
  {% endfor %}
</ul>

<h3>Pending requests</h3>
<ul>
  {% for mem, u, gl in pending %}
    <li>
      {{ u.username }}
      {% if gl %}— wants to show list "<strong>{{ gl.name }}</strong>"{% endif %}

      <form method="post" action="/groups/{{ group.id }}/approve" style="display:inline">
        <input type="hidden" name="membership_id" value="{{ mem.id }}">
        <button type="submit">Approve</button>
      </form>

      <form method="post" action="/groups/{{ group.id }}/deny" style="display:inline; margin-left:6px;">
        <input type="hidden" name="membership_id" value="{{ mem.id }}">
        <button type="submit">Deny</button>
      </form>
    </li>
  {% else %}
    <li><em>No pending requests.</em></li>
  {% endfor %}
</ul>

<h3>Invite user</h3>
<form method="post" action="/groups/{{ group.id }}/invite" class="inline-form">
  <input type="text" name="invitee" placeholder="username or email" required>
  <button type="submit">Invite</button>
</form>

<p><a href="/groups/{{ group.id }}">Back to group</a></p>
{% endblock %}


{% if invited and invited|length > 0 %}
<h3>Invited users (awaiting acceptance)</h3>
<ul>
  {% for mem, u, gl in invited %}
    <li>{{ u.username }}</li>
  {% endfor %}
</ul>
{% endif %}
