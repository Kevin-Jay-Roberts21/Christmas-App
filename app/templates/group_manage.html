{% extends "base.html" %}
{% block content %}
<h2>Manage "{{ group.name }}"</h2>

<h3>Pending requests</h3>
<ul>
  {% for mem, u, gl in pending %}
    <li>
      {{ u.username }} {% if gl %}— wants to show list "<strong>{{ gl.name }}</strong>"{% endif %}
      <form method="post" action="/groups/{{ group.id }}/approve" style="display:inline">
        <input type="hidden" name="membership_id" value="{{ mem.id }}">
        <button type="submit">Approve</button>
      </form>
    </li>
  {% else %}
    <li><em>No pending requests.</em></li>
  {% endfor %}
</ul>

<h3>Approved members</h3>
<ul>
  {% for mem, u, gl in approved %}
    <li>
      {{ u.username }} {% if u.id == group.leader_id %}(leader){% endif %}
      {% if gl %}— list "<strong>{{ gl.name }}</strong>"{% endif %}
    </li>
  {% else %}
    <li><em>No approved members yet.</em></li>
  {% endfor %}
</ul>

<h3>Invite user</h3>
<form method="post" action="/groups/{{ group.id }}/invite">
  <div>
    <label>Username or Email
      <input name="identifier" required>
    </label>
  </div>
  <button type="submit">Invite</button>
</form>

<p><a href="/groups/{{ group.id }}">Back to group</a></p>
{% endblock %}
